{{- printf "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>" | safeHTML }}
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:xhtml="http://www.w3.org/1999/xhtml">
  
  {{/* Главная страница */}}
  <url>
    <loc>{{ .Site.BaseURL }}</loc>
    <lastmod>{{ now.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  
  {{/* Страница постов */}}
  <url>
    <loc>{{ printf "%sposts/" $.Site.BaseURL }}</loc>
    <lastmod>{{ now.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
    <changefreq>hourly</changefreq>
    <priority>0.8</priority>
  </url>
  
  {{/* Страница тегов */}}
  <url>
    <loc>{{ printf "%stags/" $.Site.BaseURL }}</loc>
    <lastmod>{{ now.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.6</priority>
  </url>
  
  {{/* Страница категорий */}}
  <url>
    <loc>{{ printf "%scategories/" $.Site.BaseURL }}</loc>
    <lastmod>{{ now.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.6</priority>
  </url>
  
  {{/* Страницы постов */}}
  {{- range where .Site.RegularPages "Type" "posts" }}
  <url>
    <loc>{{ .Permalink }}</loc>
    {{- if not .Lastmod.IsZero }}
    <lastmod>{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
    {{- end }}
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
  {{- end }}
  
  {{/* Страницы тегов с транслитерированными URL (только английские и транслитерированные) */}}
  {{- range .Site.Taxonomies.tags }}
    {{- $tagSlug := .Page.Title | urlize }}
    {{- if not (hasPrefix $tagSlug "%") }}
  <url>
    <loc>{{ printf "%stags/%s/" $.Site.BaseURL $tagSlug }}</loc>
    <lastmod>{{ now.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.3</priority>
  </url>
    {{- end }}
  {{- end }}
  
  {{/* Страницы категорий с транслитерированными URL (только английские и транслитерированные) */}}
  {{- range .Site.Taxonomies.categories }}
    {{- $catSlug := .Page.Title | urlize }}
    {{- if not (hasPrefix $catSlug "%") }}
  <url>
    <loc>{{ printf "%scategories/%s/" $.Site.BaseURL $catSlug }}</loc>
    <lastmod>{{ now.Format "2006-01-02T15:04:05-07:00" }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.3</priority>
  </url>
    {{- end }}
  {{- end }}
  
</urlset>